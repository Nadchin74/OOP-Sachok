# üìÑ –ó–≤—ñ—Ç –¥–æ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ ‚Ññ7: –ü–∞—Ç–µ—Ä–Ω Retry —Ç–∞ –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–∞ –ó–∞—Ç—Ä–∏–º–∫–∞

## 1. –ú–µ—Ç–∞ –†–æ–±–æ—Ç–∏

–ó–∞–∫—Ä—ñ–ø–∏—Ç–∏ –∑–Ω–∞–Ω–Ω—è –ø—Ä–æ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ —É C# (`try-catch-finally`) —Ç–∞ –Ω–∞–≤—á–∏—Ç–∏—Å—è —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ—Å—É–Ω—É—Ç–∏–π –ø–∞—Ç–µ—Ä–Ω –æ–±—Ä–æ–±–∫–∏ —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö –ø–æ–º–∏–ª–æ–∫ ‚Äî **–ü–∞—Ç–µ—Ä–Ω Retry (–ü–æ–≤—Ç–æ—Ä–Ω—ñ —Å–ø—Ä–æ–±–∏)**. –ó–æ–∫—Ä–µ–º–∞, —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–π –º–µ—Ç–æ–¥ –∑ **–ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ—é –∑–∞—Ç—Ä–∏–º–∫–æ—é** –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É —Ç–∞ –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤.

## 2. –û–ø–∏—Å –í–∏–∫–æ–Ω–∞–Ω–Ω—è –ó–∞–≤–¥–∞–Ω–Ω—è (C#)

–ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –º–æ–≤–æ—é C#, —É—Å—ñ –≤–∏–º–æ–≥–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ –≤ –∫–ª–∞—Å–∞—Ö `FileProcessor`, `NetworkClient` —Ç–∞ —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–æ–º—É —Å—Ç–∞—Ç–∏—á–Ω–æ–º—É –∫–ª–∞—Å—ñ `RetryHelper`.

### 2.1. –Ü–º—ñ—Ç–∞—Ü—ñ—è –í–∏–Ω—è—Ç–∫—ñ–≤ (FileProcessor, NetworkClient)

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –ø–∞—Ç–µ—Ä–Ω—É Retry —Å—Ç–≤–æ—Ä–µ–Ω–æ –¥–≤–∞ –∫–ª–∞—Å–∏, —â–æ —ñ–º—ñ—Ç—É—é—Ç—å —Ç–∏–º—á–∞—Å–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏:
* **`FileProcessor`**: –ú–µ—Ç–æ–¥ `LoadConfiguration` —ñ–º—ñ—Ç—É—î –≤–∏–∫–∏–¥–∞–Ω–Ω—è `IOException` –ø–µ—Ä—à—ñ **2 —Ä–∞–∑–∏**.
* **`NetworkClient`**: –ú–µ—Ç–æ–¥ `DownloadConfiguration` —ñ–º—ñ—Ç—É—î –≤–∏–∫–∏–¥–∞–Ω–Ω—è `HttpRequestException` –ø–µ—Ä—à—ñ **3 —Ä–∞–∑–∏**.
* –ö–æ–∂–µ–Ω –º–µ—Ç–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –ª—ñ—á–∏–ª—å–Ω–∏–∫, —â–æ–± –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —É—Å–ø—ñ—à–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó –ø—ñ—Å–ª—è –∑–∞–¥–∞–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –Ω–µ–≤–¥–∞—á.

### 2.2. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –£–∑–∞–≥–∞–ª—å–Ω–µ–Ω–æ–≥–æ RetryHelper

–°—Ç–≤–æ—Ä–µ–Ω–æ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –∫–ª–∞—Å `RetryHelper` –∑ —É–∑–∞–≥–∞–ª—å–Ω–µ–Ω–∏–º –º–µ—Ç–æ–¥–æ–º `public static T ExecuteWithRetry<T>(...)`.

#### 1. –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–∞ –ó–∞—Ç—Ä–∏–º–∫–∞
–ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é:
$$\text{–ó–∞—Ç—Ä–∏–º–∫–∞} = \text{–ü–æ—á–∞—Ç–∫–æ–≤–∞ –ó–∞—Ç—Ä–∏–º–∫–∞} \times 2^{(\text{–°–ø—Ä–æ–±–∞} - 1)}$$
–¶–µ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—É, —è–∫–∏–π –∑–∞–∑–Ω–∞–≤ —Ç–∏–º—á–∞—Å–æ–≤–æ—ó –Ω–µ–≤–¥–∞—á—ñ, –¥–∞—é—á–∏ –π–æ–º—É —á–∞—Å –Ω–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è.

#### 2. –í–∏–±—ñ—Ä–∫–æ–≤–∏–π –ü–æ–≤—Ç–æ—Ä (`shouldRetry`)
–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –¥–µ–ª–µ–≥–∞—Ç `Func<Exception, bool> shouldRetry`. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –ø–æ–ª—ñ—Ç–∏–∫—É: –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ —Å–ø—Ä–æ–±—É **—Ç—ñ–ª—å–∫–∏ –¥–ª—è –æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö –≤–∏–Ω—è—Ç–∫—ñ–≤** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `HttpRequestException`) —Ç–∞ **–Ω–µ –ø–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏** –¥–ª—è —Ñ–∞—Ç–∞–ª—å–Ω–∏—Ö –∞–±–æ –Ω–µ–≤—ñ–¥–Ω–æ–≤–ª—é–≤–∞–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `FileNotFoundException`). –£ –°—Ü–µ–Ω–∞—Ä—ñ—ó 3 –ø–æ–∫–∞–∑–∞–Ω–æ, —è–∫ `FileNotFoundException` –æ–¥—Ä–∞–∑—É –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –≤–∏–∫–∏–¥—É –≤–∏–Ω—è—Ç–∫—É, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –Ω–µ –ø—ñ–¥–ª—è–≥–∞—î –ø–æ–≤—Ç–æ—Ä—É.

#### 3. –õ–æ–≥—É–≤–∞–Ω–Ω—è
–ö–æ–∂–Ω–∞ —Å–ø—Ä–æ–±–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–∞ –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ–≤–¥–∞—á—ñ –¥–µ—Ç–∞–ª—å–Ω–æ –ª–æ–≥—É—é—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å, –≤–∫–ª—é—á–∞—é—á–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –º–∞–π–±—É—Ç–Ω—é –∑–∞—Ç—Ä–∏–º–∫—É.

## 3. –ü—Ä–∏–∫–ª–∞–¥–∏ –ó–∞–ø—É—Å–∫—É —Ç–∞ –°—Ü–µ–Ω–∞—Ä—ñ—ó

–£ –º–µ—Ç–æ–¥—ñ `Main()` –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–æ–≤–∞–Ω–æ —Ç—Ä–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —è–∫—ñ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–æ–∫—Ä–∏–≤–∞—é—Ç—å –≤–∏–º–æ–≥–∏ –∑–∞–≤–¥–∞–Ω–Ω—è.

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: FileProcessor (–£—Å–ø—ñ—à–Ω–∏–π –ø–æ–≤—Ç–æ—Ä –ø—ñ—Å–ª—è 2-—Ö –Ω–µ–≤–¥–∞—á)
* –û–ø–µ—Ä–∞—Ü—ñ—è: `LoadConfiguration`.
* –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–ø–µ—Ä–∞—Ü—ñ—è **—É—Å–ø—ñ—à–Ω–æ** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –Ω–∞ **3-–π —Å–ø—Ä–æ–±—ñ** –∑–∞–≤–¥—è–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞–º.

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: NetworkClient (–£—Å–ø—ñ—à–Ω–∏–π –ø–æ–≤—Ç–æ—Ä –ø—ñ—Å–ª—è 3-—Ö –Ω–µ–≤–¥–∞—á)
* –û–ø–µ—Ä–∞—Ü—ñ—è: `DownloadConfiguration`.
* –ü–æ–ª—ñ—Ç–∏–∫–∞: –ü–æ–≤—Ç–æ—Ä—é–≤–∞—Ç–∏ –ª–∏—à–µ –¥–ª—è `HttpRequestException`.
* –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–ø–µ—Ä–∞—Ü—ñ—è **—É—Å–ø—ñ—à–Ω–æ** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –Ω–∞ **4-–π —Å–ø—Ä–æ–±—ñ**.

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ù–µ–ø—ñ–¥—Ö–æ–¥—è—â–æ–≥–æ –í–∏–Ω—è—Ç–∫—É
* –û–ø–µ—Ä–∞—Ü—ñ—è: –Ü–º—ñ—Ç—É—î `FileNotFoundException`.
* –ü–æ–ª—ñ—Ç–∏–∫–∞: `shouldRetry` –ø–æ–≤–µ—Ä—Ç–∞—î `false` –¥–ª—è `FileNotFoundException`.
* –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–ø–µ—Ä–∞—Ü—ñ—è **–Ω–µ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è**; –≤–∏–Ω—è—Ç–æ–∫ –æ–¥—Ä–∞–∑—É –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è (—É—Å–ø—ñ—à–Ω–∏–π –ø—Ä–æ–≤–∞–ª). –¶–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î —Ä–æ–±–æ—Ç—É –ø–æ–ª—ñ—Ç–∏–∫–∏ –≤–∏–±—ñ—Ä–∫–æ–≤–æ–≥–æ –ø–æ–≤—Ç–æ—Ä—É.

### –í–∏–≤—ñ–¥ –ø—Ä–æ–≥—Ä–∞–º–∏ (–°–∫—Ä—ñ–Ω—à–æ—Ç)

![alt text](image.png)

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ù–∞–¥–∞–Ω–∏–π —Å–∫—Ä—ñ–Ω—à–æ—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —É—Å–ø—ñ—à–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –°—Ü–µ–Ω–∞—Ä—ñ—é 2 —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω—É —Ä–æ–±–æ—Ç—É –ø–æ–ª—ñ—Ç–∏–∫–∏ —É –°—Ü–µ–Ω–∞—Ä—ñ—ó 3.